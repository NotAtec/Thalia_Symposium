<!DOCTYPE html>
<html>
  <head>
    <title>ThaliaSymposium</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "tailwind", "inter-font", "data-turbo-track": "reload" %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>

    <style>
      /* TODO: move to application style sheet */
      html {
          background: radial-gradient(ellipse at top left, #94daf7, #fadcec) no-repeat center center fixed;
          background-size: cover;
      }

      html, body {
          height: 100%;
          margin: 0;
          padding: 0;
          overflow: auto;
      }

      #logo {
          overflow: auto;
      }

      #nav {
          border-bottom: 1px solid rgba(255, 255, 255, 0.3);
          backdrop-filter: blur(10px);
      }

      #login-button {
          background-size: 25%;
          background-position: -1px center;
          background-clip: padding-box;
          overflow: hidden;
          background-repeat: no-repeat;
          background-image: url(<%= image_url "login-arrow.svg" %>)
      }
    </style>

    <script>
      let menuOpen = false;

      window.addEventListener("click", function(event) {
          if (menuOpen) {
              toggleMenu(event);
          }
      });

      window.addEventListener("load", function() {
          document.getElementById("menu-button").addEventListener("click", toggleMenu);
      });

      function toggleMenu(event) {
          let original = document.getElementById("nav").classList;
          let logo = document.getElementById("logo");
          let container = document.getElementById("nav-container").classList;
          let expanded = document.getElementById("nav-items-expanded").classList;
          menuOpen = expanded.contains("hidden");
          if (expanded.contains("hidden")) {
              expanded.remove("hidden");
              original.add("hidden");
              container.remove("h-[64px]");
              container.add("h-[192px]");
              if (logo) {
                  logo.classList.remove("h-[calc(100%-64px)]");
                  logo.classList.add("h-[calc(100%-192px)]");
              }
          }
          else {
              expanded.add("hidden");
              original.remove("hidden");
              container.remove("h-[192px]");
              container.add("h-[64px]");
              if (logo) {
                  logo.classList.remove("h-[calc(100%-192px)]");
                  logo.classList.add("h-[calc(100%-64px)]");
              }
          }
          event.stopPropagation();
      }
    </script>
  </head>

  <body class="block">
    <% if current_page?(root_path) %>
      <header id="logo" class="w-full lg:items-end py-8 px-8 lg:grid lg:grid-cols-[1fr_2.46fr] h-[calc(100%-64px)]">
        <%= image_tag "thalialogo.svg", class: "w-1/3 lg:w-full" %>
        <%= image_tag "largelogo.svg", width: "100%", class: "mt-8 lg:m-0" %>
      </header>
    <% end %>
    <%= render 'layouts/navbar' %>
    <main class="w-full">
      <%= yield %>
    </main>
  </body>
</html>
